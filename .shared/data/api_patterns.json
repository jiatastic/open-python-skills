{
  "source": "Curated API design patterns",
  "version": "2026-01",
  "description": "API design patterns for Python backends",
  "entries": [
    {
      "id": "api-pagination-limit-offset",
      "category": "api",
      "title": "Pagination (limit/offset)",
      "tags": [
        "api",
        "pagination",
        "limit",
        "offset",
        "rest"
      ],
      "summary": "Expose limit/offset with max caps; return total/count when feasible.",
      "content": "Validate limit/offset, cap limit to a max (e.g. 100). Return items and pagination metadata for clients.",
      "code_examples": [
        {
          "description": "Limit/offset params",
          "code": "from fastapi import Query\n\ndef pagination_params(\n    limit: int = Query(default=20, ge=1, le=100),\n    offset: int = Query(default=0, ge=0),\n) -> tuple[int, int]:\n    return limit, offset\n"
        }
      ]
    },
    {
      "id": "api-versioning-path",
      "category": "api",
      "title": "API Versioning via Path Prefix",
      "tags": [
        "api",
        "versioning",
        "router",
        "fastapi"
      ],
      "summary": "Use /v1 prefix for breaking changes; keep old versions intact until deprecation.",
      "content": "Mount routers under /v1, /v2, etc. Deprecate with timelines and communicate changes.",
      "code_examples": [
        {
          "description": "Router prefix",
          "code": "from fastapi import APIRouter\n\nrouter_v1 = APIRouter(prefix=\"/v1\", tags=[\"v1\"])\n"
        }
      ]
    },
    {
      "id": "api-error-shape",
      "category": "api",
      "title": "Consistent Error Responses",
      "tags": [
        "api",
        "errors",
        "http",
        "fastapi"
      ],
      "summary": "Use consistent error shape and status codes; avoid leaking internals.",
      "content": "For validation errors FastAPI already provides structure. For domain errors, standardize detail/code fields and log server-side.",
      "code_examples": [
        {
          "description": "HTTPException with code",
          "code": "from fastapi import HTTPException\n\ndef not_found(entity: str) -> None:\n    raise HTTPException(status_code=404, detail={\"code\": \"NOT_FOUND\", \"entity\": entity})\n"
        }
      ]
    }
  ]
}
